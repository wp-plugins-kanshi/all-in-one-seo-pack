import{D as b,F as k,l as U,G as x}from"./index.ed1fc0db.js";import{C as A}from"./Index.39bbd6c8.js";import{C as L}from"./Index.504e4ac6.js";import{G as W,a as O}from"./Row.29b591ed.js";import"./translations.d159963e.js";import{_ as I}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as e}from"./default-i18n.20001971.js";import{c as _,a as l,m as E,a2 as i,ae as N,a1 as c,a4 as f,a6 as d,o as p,F as B,af as T,$ as s,a7 as u}from"./runtime-core.esm-bundler.4f558f23.js";import"./helpers.2a6f0df7.js";import"./Button.e237bb50.js";import"./Pencil.b89246dd.js";import"./constants.fe8bda37.js";import"./Close.8fb798f7.js";const t="all-in-one-seo-pack",D={setup(){return{pluginsStore:b(),wpCodeStore:k(),links:U}},components:{Cta:A,CoreAlert:L,GridColumn:W,GridRow:O},data(){return{loadingUseSnippet:null,failed:!1,activationLoading:!1,strings:{codesnippets:e("Code Snippets",t),installSnippet:e("Use Snippet",t),editSnippet:e("Edit Snippet",t),ctaDescription:e("Using WPCode you can install AIOSEO code snippets with 1-click directly from this page or the WPCode library inside the WordPress admin.",t),ctaLearnMoreText:e("Learn More about WPCode Snippets",t),noSnippets:e("We encountered an error loading the code snippets, please try again later.",t),activateError:e("An error occurred while activating the addon. Please upload it manually or contact support for more information.",t),permissionWarning:e("You currently don't have permission to activate this addon. Please ask a site administrator to activate first.",t)}}},computed:{showSnippets(){return this.wpCodeStore.pluginInstalled&&this.wpCodeStore.pluginActive&&!this.wpCodeStore.pluginNeedsUpdate},blurClass(){return this.showSnippets?"":"aioseo-blur"},ctaTitle(){if(this.wpCodeStore.pluginNeedsUpdate)return e("Please Update WPCode to load the AIOSEO Snippet Library",t);if(this.wpCodeStore.pluginInstalled){if(!this.wpCodeStore.pluginActive)return e("Please Activate WPCode to load the AIOSEO Snippet Library",t)}else return e("Please Install WPCode to load the AIOSEO Snippet Library",t);return e("Please Install WPCode to load the AIOSEO Snippet Library",t)},ctaButtonText(){if(this.wpCodeStore.pluginNeedsUpdate)return e("Update WPCode",t);if(this.wpCodeStore.pluginInstalled){if(!this.wpCodeStore.pluginActive)return e("Activate WPCode",t)}else return e("Install WPCode",t);return e("Install WPCode",t)}},methods:{decode:x.decode,processUpdateOrActivate(){this.activateOrUpdate(this.wpCodeStore.pluginNeedsUpdate)},activateOrUpdate(g=!1){this.failed=!1,this.activationLoading=!0;const m=g?"upgradePlugins":"installPlugins",a=this.pluginsStore.plugins.wpcodePro.installed?"wpcodePro":"wpcode";this.pluginsStore[m]([{plugin:a,type:"plugin"}]).then(o=>{if(o.body.failed.length){this.activationLoading=!1,this.failed=!0;return}const n=[this.wpCodeStore.loadSnippets()];Promise.all(n).then(()=>{this.activationLoading=!1})}).catch(o=>{this.activationLoading=!1,this.failed=!0,console.error(`Unable to install ${a}: ${o}`)})}}},G={class:"aioseo-tools-wpcode"},V={class:"aioseo-wpcode-snippet"},z={class:"wpcode-snippet-body"},F={class:"snippet-title"},M={class:"snippet-description"},R={class:"wpcode-snippet-footer"};function Y(g,m,S,a,o,n){const h=d("base-button"),C=d("grid-column"),w=d("grid-row"),y=d("cta"),v=d("core-alert");return p(),_("div",G,[l("div",{class:N(n.blurClass)},[E(w,null,{default:i(()=>[(p(!0),_(B,null,T(a.wpCodeStore.snippets,(r,P)=>(p(),c(C,{key:P,sm:"12",md:"6",lg:"4"},{default:i(()=>[l("div",V,[l("div",z,[l("div",F,s(r.title),1),l("div",M,s(r.note),1)]),l("div",R,[r.install?(p(),c(h,{key:0,type:"blue",size:"medium",tag:"a",href:n.decode(r.install),onClick:j=>o.loadingUseSnippet=r.install,loading:r.install===o.loadingUseSnippet},{default:i(()=>[u(s(r.installed?o.strings.editSnippet:o.strings.installSnippet),1)]),_:2},1032,["href","onClick","loading"])):(p(),c(h,{key:1,type:"gray",size:"medium",disabled:""},{default:i(()=>[u(s(o.strings.installSnippet),1)]),_:1}))])])]),_:2},1024))),128))]),_:1})],2),!n.showSnippets&&a.wpCodeStore.snippets.length?(p(),c(y,{key:0,"button-text":n.ctaButtonText,"learn-more-link":a.links.getDocUrl("wpcode"),"cta-button-loading":o.activationLoading,onCtaButtonClick:n.processUpdateOrActivate,"same-tab":"","align-top":"","cta-button-action":"","hide-bonus":""},{"header-text":i(()=>[u(s(n.ctaTitle),1)]),description:i(()=>[u(s(o.strings.ctaDescription),1)]),"learn-more-text":i(()=>[u(s(o.strings.ctaLearnMoreText),1)]),_:1},8,["button-text","learn-more-link","cta-button-loading","onCtaButtonClick"])):f("",!0),n.showSnippets&&a.wpCodeStore.snippets.length===0?(p(),c(v,{key:1,type:"yellow"},{default:i(()=>[l("div",null,s(o.strings.noSnippets),1)]),_:1})):f("",!0)])}const se=I(D,[["render",Y]]);export{se as default};
