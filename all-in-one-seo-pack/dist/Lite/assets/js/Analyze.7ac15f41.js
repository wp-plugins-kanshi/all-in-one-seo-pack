import{a as V}from"./runtime-dom.esm-bundler.f6259c83.js";import{q as P,a as E,l as W,B as I,c as Y}from"./index.ed1fc0db.js";import{p as q}from"./popup.92105c51.js";import{u as U}from"./SeoSiteScore.88af9c09.js";import{a as F}from"./utils.53e2e8da.js";import{C as X}from"./Blur.0f162340.js";import{k as Z}from"./helpers.2a6f0df7.js";import{i as J}from"./iphone-frame.d837f811.js";import{C as K}from"./DonutChart.a3a9bd2d.js";import{C as Q}from"./Index.4c34b46f.js";import{S as $}from"./Book.6b29a263.js";import{S as ee}from"./Lab.a91aaa7d.js";import"./translations.d159963e.js";import{_ as oe}from"./_plugin-vue_export-helper.eefbdd86.js";import{Z as N,a6 as f,o,c as l,a1 as v,a4 as c,a as r,$ as d,m as M,F as se,af as re,a2 as j,a7 as D,_ as te,X as g,g as ne,T as t}from"./runtime-core.esm-bundler.4f558f23.js";import{_ as x,s as H}from"./default-i18n.20001971.js";import{u as ae}from"./ConnectStore.d1323f77.js";const O="all-in-one-seo-pack",ie={setup(R){const{errorObject:u,strings:i}=U({score:N(R.score)});return{analyzerStore:P(),rootStore:E(),composableStrings:i,errorObject:u,links:W,getAssetUrl:Z,iphoneFrame:J}},components:{CoreDonutChart:K,CoreSiteScore:Q,SvgBook:$,SvgDannieLab:ee},props:{score:[Number,String],loading:Boolean,description:String,summary:{type:Object,default(){return{}}}},data(){return{strings:I({yourHomepageScore:x("Your Homepage Score:",O),goodResult:H(x("A very good score is between %1$s%3$d and %4$d%2$s.",O),"<strong>","</strong>",50,75),forBestResults:H(x("For best results, you should strive for %1$s%3$d and above%2$s.",O),"<strong>","</strong>",70),readUltimateSeoGuide:x("Read the Ultimate WordPress SEO Guide",O)},this.composableStrings)}},computed:{sortedParts(){return F({good:this.summary.good,warnings:this.summary.warnings,issues:this.summary.issues,total:this.summary.total})}}},le={class:"aioseo-seo-analysis"},ce={key:0,class:"seo-analysis-score"},ue={key:1,class:"seo-analysis-description"},me={key:0,class:"seo-analysis-homepage-url"},de=["href"],_e=["innerHTML"],pe=["innerHTML"],ge={class:"d-flex"},ye=["href"],he={key:2,class:"seo-analysis-mobile-snapshot"},Se={class:"mobile-snapshot-image"},fe=["src"],ve=["src"],ke={key:3,class:"seo-analysis-error"},be={class:"error-title"},Ce=["innerHTML"],ze={class:"error-action-buttons"};function Ae(R,u,i,e,m,n){var p,k,b,C,z,A,T,a,S;const B=f("core-site-score"),_=f("core-donut-chart"),L=f("svg-book"),y=f("svg-dannie-lab"),h=f("base-button");return o(),l("div",le,[e.analyzerStore.analyzeError?c("",!0):(o(),l("div",ce,[i.loading?(o(),v(B,{key:0,loading:!0,score:parseInt(i.score),description:i.description,strokeWidth:1.75},null,8,["score","description"])):(o(),v(_,{key:1,parts:n.sortedParts,total:parseInt(i.score),label:i.description,maxTotal:"100",animatedNumber:!1,"is-label-colored":""},null,8,["parts","total","label"]))])),e.analyzerStore.analyzeError?c("",!0):(o(),l("div",ue,[r("h2",null,d(m.strings.yourHomepageScore),1),(b=(k=(p=e.rootStore)==null?void 0:p.aioseo)==null?void 0:k.urls)!=null&&b.home?(o(),l("span",me,[r("a",{target:"_blank",href:e.rootStore.aioseo.urls.home},d(e.rootStore.aioseo.urls.home),9,de)])):c("",!0),r("div",{innerHTML:m.strings.goodResult},null,8,_e),r("div",{innerHTML:m.strings.forBestResults},null,8,pe),r("div",ge,[M(L),r("a",{href:e.links.getDocUrl("ultimateGuide"),target:"_blank"},d(m.strings.readUltimateSeoGuide),9,ye)])])),!e.analyzerStore.analyzeError&&((A=(z=(C=e.analyzerStore.homeResults)==null?void 0:C.results)==null?void 0:z.advanced)!=null&&A.mobileSnapshot)?(o(),l("div",he,[r("div",Se,[r("img",{class:"mobile-snapshot-image__frame",src:e.getAssetUrl(e.iphoneFrame),alt:"Mobile Snapshot iPhone Frame"},null,8,fe),r("img",{class:"mobile-snapshot-image__content",alt:"Mobile Snapshot",src:(S=(a=(T=e.analyzerStore.homeResults)==null?void 0:T.results)==null?void 0:a.advanced)==null?void 0:S.mobileSnapshot},null,8,ve)])])):c("",!0),e.analyzerStore.analyzeError&&e.errorObject?(o(),l("div",ke,[M(y),r("p",be,d(m.strings.anErrorOccurred),1),r("p",{class:"error-description",innerHTML:e.errorObject.description},null,8,Ce),r("div",ze,[(o(!0),l(se,null,re(e.errorObject.buttons,(s,G)=>(o(),v(h,{key:G,type:s.type,tag:s.tag?s.tag:"button",target:"_blank",href:s.url?s.url:"",size:"medium",loading:(s==null?void 0:s.runAgain)&&e.analyzerStore.analyzing,onClick:Oe=>s!=null&&s.runAgain?e.analyzerStore.runSiteAnalyzer():""},{default:j(()=>[D(d(s.text),1)]),_:2},1032,["type","tag","href","loading","onClick"]))),128))])])):c("",!0)])}const w=oe(ie,[["render",Ae]]),Te={class:"aioseo-seo-site-score"},xe={key:1,class:"aioseo-seo-site-score-cta"},Ye={__name:"Analyze",setup(R){const u=N(0),{connectWithAioseo:i,description:e,strings:m}=U({score:u}),n=P(),B=ae(),_=Y(),L=E();te(()=>n.homeResults.score,a=>{u.value=a});const y=g(()=>n.goodCount("homepage")),h=g(()=>n.recommendedCount("homepage")),p=g(()=>n.criticalCount("homepage")),k=g(()=>y.value+h.value+p.value),b=g(()=>({recommended:h.value,critical:p.value,good:y.value})),C=g(()=>F({good:y.value,warnings:h.value,issues:p.value,total:k.value})),z=a=>{q(a,i,600,630,!0,["token"],A,T)},A=a=>B.saveConnectToken(a.token),T=a=>{a&&n.runSiteAnalyzer()};return ne(()=>{!n.homeResults.score&&_.internalOptions.internal.siteAnalysis.connectToken&&n.runSiteAnalyzer(),u.value=n.homeResults.score}),(a,S)=>(o(),l("div",Te,[t(_).internalOptions.internal.siteAnalysis.connectToken?c("",!0):(o(),v(t(X),{key:0},{default:j(()=>[M(t(w),{score:85,description:t(e)},null,8,["description"])]),_:1})),t(_).internalOptions.internal.siteAnalysis.connectToken?c("",!0):(o(),l("div",xe,[r("a",{href:"#",onClick:S[0]||(S[0]=V(s=>z(t(L).aioseo.urls.connect),["prevent"]))},d(t(i)),1),D(" "+d(t(m).toSeeYourSiteScore),1)])),t(_).internalOptions.internal.siteAnalysis.connectToken?(o(),v(t(w),{key:2,score:u.value,description:t(e),loading:t(n).analyzing,summary:b.value,parts:C.value},null,8,["score","description","loading","summary","parts"])):c("",!0)]))}};export{Ye as _};
